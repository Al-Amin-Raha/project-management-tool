<!-- management/templates/management/project_detail.html -->

{% extends "management/base_generic.html" %}

{% block title %}{{ project.name }}{% endblock %}

{% block content %}
<h1>{{ project.name }}</h1>
<p>{{ project.description }}</p>

<h2>Members</h2>
<ul>
    <li>{{ project.owner.username }} (Project Manager)</li>
    {% for member in members %}
        {% if member != project.owner %}
            <li>{{ member.username }}</li>
        {% endif %}
    {% endfor %}
</ul>

<h2>Tasks</h2>
<ul>
    {% for task in tasks %}
    <li>
        <a href="{% url 'task_detail' task.id %}">{{ task.name }}</a> - (Assigned: {{ task.assigned_to.username }})
        {% if user == project.owner %}
        | <a href="{% url 'update_task' task.id %}">Edit</a>
        | <a href="{% url 'delete_task' task.id %}">Delete</a>
        {% elif user == task.assigned_to %}
        
        {% endif %}
    </li>
    {% endfor %}
</ul>

{% if user == project.owner %}
<a href="{% url 'create_task' project.id %}" class="btn">Add Task</a> 
<a href="{% url 'update_project' project.id %}" class="btn">Edit Project</a>
<a href="{% url 'delete_project' project.id %}" class="btn">Delete Project</a>
{% endif %}

{% endblock %}
